<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ìœ ê¸°ì‚¬ RPG â€” ì•ˆì •íŒ</title>

<style>
:root{
  --bg1:#071027; --bg2:#020212;
  --accent:#7c8cff; --accent2:#ff9b9b;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:'Segoe UI',system-ui,Arial;
background:linear-gradient(180deg,var(--bg1),var(--bg2));color:#e9ecff}
body{display:flex;align-items:center;justify-content:center;padding:20px}
.app{width:100%;max-width:1100px;border-radius:16px;
background:linear-gradient(180deg,rgba(2,6,23,0.55),rgba(1,3,10,0.75));
padding:16px;display:grid;grid-template-columns:320px 1fr;gap:16px;
box-shadow:0 12px 40px rgba(0,0,0,0.6)}
.card{background:rgba(255,255,255,0.02);padding:12px;border-radius:12px}
.hud-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
.hud-item{background:rgba(255,255,255,0.01);padding:10px;border-radius:10px;text-align:center}
.hud-item .label{font-size:12px;color:#bfc7ff}
.hud-item .value{font-weight:800;font-size:18px;color:var(--accent)}
.area{font-weight:800;text-align:center;margin:8px 0}
.monster-card{text-align:center;padding:16px;border-radius:12px;
background:linear-gradient(180deg,rgba(10,14,30,0.5),rgba(5,7,12,0.5))}
.monster-name{font-size:20px;font-weight:800;margin-bottom:8px}
.hp-bar{height:14px;background:#111;border-radius:10px;overflow:hidden}
.hp-fill{height:100%;background:linear-gradient(90deg,#ff3b3b,#ff9b9b);
width:100%;transition:width .08s}
.btn{padding:10px 12px;border-radius:12px;border:none;cursor:pointer;
background:linear-gradient(90deg,var(--accent),#5b62e8);color:#fff;font-weight:800}
.btn.small{padding:8px 10px;font-size:13px}
.btn.warn{background:linear-gradient(90deg,#ff7b7b,#ffb86b);color:#110}
.btn.auto{background:linear-gradient(90deg,#00ffa6,#00b37a)}
.map-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
.map-node{padding:10px;border-radius:10px;background:rgba(255,255,255,0.02);
cursor:pointer;text-align:center}
.map-node.locked{opacity:.45;cursor:not-allowed}
.shop-grid{display:flex;flex-direction:column;gap:8px}
.shop-item{display:flex;justify-content:space-between;align-items:center;
padding:8px;border-radius:8px;background:rgba(255,255,255,0.01)}
.skill-row{display:flex;gap:8px;margin-top:10px}
.skill-btn{flex:1;padding:10px;border-radius:10px;
background:linear-gradient(90deg,#ff8b8b,#ffc26f);color:#110;font-weight:800;
cursor:pointer;position:relative}
.cooldown{position:absolute;left:0;top:0;height:100%;background:rgba(0,0,0,0.45);
width:0%;transition:width .2s linear;color:#fff;
display:flex;align-items:center;justify-content:center}
.log{height:140px;overflow:auto;padding:8px;border-radius:8px;
background:rgba(255,255,255,0.02);font-size:13px}
</style>
</head>

<body>
<div class="app">

<!-- (ì¤‘ê°„ UI / ë§µ / ëª¬ìŠ¤í„° / ìƒì  / ìŠ¤í‚¬ êµ¬ì¡°ëŠ” ë„¤ ì›ë³¸ ê·¸ëŒ€ë¡œ ìœ ì§€) -->

<!-- ë¡œê·¸ -->
<div class="card">
  <div style="display:flex;justify-content:space-between">
    <strong>ë¡œê·¸</strong>
    <small id="timeBadge">ì €ì¥ë¨</small>
  </div>
  <div id="log" class="log">ì—¬ì •ì´ ì‹œì‘ë˜ì—ˆë‹¤â€¦</div>
</div>

</div>

<script>
document.addEventListener('DOMContentLoaded',()=>{

const logEl = document.getElementById('log');
const timeBadge = document.getElementById('timeBadge');

/* ===== ë¡œê·¸ ===== */
function log(t){
  const d=document.createElement('div');
  d.textContent=t;
  logEl.prepend(d);
}

/* ===== ê²Œì„ ìƒíƒœ (ì›ë³¸ ìœ ì§€) ===== */
let coins=0, atk=1, playerLv=1, exp=0, nextExp=10;
let upgradeLv=1, upgradeChance=90;
let job="ë©œë¡œìš°ê¸‰", jobStage=0, goldBonus=1, kills=0;
let mp=100, maxMp=100, currentMap=0;

/* =========================
   âœ… ì €ì¥ ë¡œì§ (ìˆ˜ì •ë¨)
   ========================= */
function save(silent=true){
  try{
    const data={
      coins,atk,playerLv,exp,nextExp,upgradeLv,upgradeChance,
      job,jobStage,goldBonus,kills,mp,maxMp,currentMap
    };
    localStorage.setItem("yugisa_save_v3",JSON.stringify(data));
    localStorage.setItem("yugisa_save_time",Date.now());
    timeBadge.textContent="ì €ì¥ë¨";
    if(!silent) log("ğŸ’¾ ì €ì¥ë¨");
  }catch(e){
    console.error(e);
    if(!silent) log("âš  ì €ì¥ ì‹¤íŒ¨");
  }
}

function load(){
  const raw=localStorage.getItem("yugisa_save_v3");
  if(!raw) return;
  try{
    const s=JSON.parse(raw);
    coins=s.coins??coins;
    atk=s.atk??atk;
    playerLv=s.playerLv??playerLv;
    exp=s.exp??exp;
    nextExp=s.nextExp??nextExp;
    upgradeLv=s.upgradeLv??upgradeLv;
    upgradeChance=s.upgradeChance??upgradeChance;
    job=s.job??job;
    jobStage=s.jobStage??jobStage;
    goldBonus=s.goldBonus??goldBonus;
    kills=s.kills??kills;
    mp=s.mp??mp;
    maxMp=s.maxMp??maxMp;
    currentMap=s.currentMap??currentMap;
  }catch(e){
    console.warn("ë¡œë“œ ì‹¤íŒ¨",e);
  }
}

/* ===== UI ê°±ì‹  ì‹œ ìë™ì €ì¥ (ë¬´ìŒ) ===== */
function updateUI(){
  save(); // silent autosave
}

/* ===== ì €ì¥ ë²„íŠ¼ë§Œ ë¡œê·¸ ì¶œë ¥ ===== */
document.getElementById("saveBtn")?.addEventListener("click",()=>{
  save(false); // ë¡œê·¸ ì¶œë ¥
});

/* ===== ì‹œì‘ ===== */
load();
updateUI();
log("ê²Œì„ ì´ˆê¸°í™” ì™„ë£Œ");

});
</script>
</body>
</html>
