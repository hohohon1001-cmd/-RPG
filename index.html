<script>
/* ===== ë°˜ë“œì‹œ ì¶”ê°€ ===== */
const logElem = document.getElementById("log");

/* =====================
   ê¸°ë³¸ ìƒíƒœ
===================== */
let player={
  name:"",
  lv:1, atk:1,
  hp:100, maxHp:100,
  mp:50, maxMp:50,
  exp:0, nextExp:20,
  gold:0
};
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>ìœ ê¸°ì‚¬ RPG â€“ ì™„ì „íŒ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- ===================== -->
<!--        STYLE          -->
<!-- ===================== -->
<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Segoe UI',Pretendard,sans-serif;
  color:#e9ecff;
  background:
    linear-gradient(rgba(0,0,0,.55),rgba(0,0,0,.85)),
    url("https://images.unsplash.com/photo-1501785888041-af3ef285b470");
  background-size:cover;
  background-attachment:fixed;
}
#app{
  max-width:1200px;
  margin:20px auto;
  padding:16px;
  display:grid;
  grid-template-columns:280px 1fr;
  gap:16px;
}

/* ===== ì¹´ë“œ ê³µí†µ ===== */
.card{
  background:rgba(20,24,48,.85);
  border-radius:18px;
  padding:14px;
  box-shadow:0 10px 40px rgba(0,0,0,.6);
}

/* ===== ì¢Œì¸¡ íŒ¨ë„ ===== */
#leftPanel{
  display:flex;
  flex-direction:column;
  gap:12px;
}
.stat{
  font-size:14px;
  margin:4px 0;
}
.bar{
  height:12px;
  border-radius:8px;
  background:#111;
  overflow:hidden;
}
.bar-fill{
  height:100%;
  transition:.2s;
}
.hp{background:linear-gradient(90deg,#ff4d4d,#ff9b9b)}
.mp{background:linear-gradient(90deg,#4dc3ff,#7ad7ff)}
.exp{background:linear-gradient(90deg,#9b7bff,#c4b5ff)}

button{
  border:none;
  border-radius:12px;
  padding:10px;
  font-weight:bold;
  cursor:pointer;
  background:linear-gradient(90deg,#5865F2,#404EED);
  color:white;
}
button.small{padding:6px;font-size:12px}
button.red{background:linear-gradient(90deg,#ff4d4d,#ff8a8a)}
button.green{background:linear-gradient(90deg,#00d084,#00a676)}
button.orange{background:linear-gradient(90deg,#ff9f1a,#ffbf69)}

/* ===== ë©”ì¸ ===== */
#mainPanel{
  display:grid;
  grid-template-rows:auto auto auto 1fr;
  gap:12px;
}

/* ëª¬ìŠ¤í„° */
#monsterBox{
  text-align:center;
}
#monsterName{
  font-size:20px;
  margin-bottom:6px;
}
#monsterHpBar{height:16px}

/* ì§€ë„ / ìƒì  / ìŠ¤í‚¬ */
.list button{
  width:100%;
  margin:4px 0;
}

/* ë¡œê·¸ */
#log{
  font-size:13px;
  line-height:1.4;
  max-height:120px;
  overflow:auto;
  background:rgba(0,0,0,.3);
  padding:8px;
  border-radius:10px;
}

/* ë‹‰ë„¤ì„ ëª¨ë‹¬ */
#nameModal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:999;
}
#nameModal .card{width:300px;text-align:center}
</style>
</head>

<body>
<div id="nameModal">
  <div class="card">
    <h3>ë‹‰ë„¤ì„ì„ ì •í•˜ì„¸ìš”</h3>
    <input id="nameInput" placeholder="ë‹‰ë„¤ì„" style="width:100%;padding:8px;border-radius:8px;border:none">
    <button onclick="setName()" style="margin-top:10px;width:100%">í™•ì¸</button>
  </div>
</div>

<div id="app">

<!-- ===================== -->
<!--      LEFT PANEL       -->
<!-- ===================== -->
<div id="leftPanel" class="card">
  <b id="playerName">???</b>
  <div class="stat">LV <span id="lv">1</span></div>
  <div class="stat">ATK <span id="atk">1</span></div>
  <div class="stat">GOLD <span id="gold">0</span></div>

  <div class="stat">HP</div>
  <div class="bar"><div id="hpBar" class="bar-fill hp"></div></div>

  <div class="stat">MP</div>
  <div class="bar"><div id="mpBar" class="bar-fill mp"></div></div>

  <div class="stat">EXP</div>
  <div class="bar"><div id="expBar" class="bar-fill exp"></div></div>

  <button onclick="attack()">âš” ê³µê²©</button>
  <button onclick="toggleAuto()" class="green">ğŸ¤– ìë™ì‚¬ëƒ¥</button>
  <button onclick="upgrade()" class="orange">ğŸ”¥ ê°•í™”</button>
  <button onclick="saveGame()">ğŸ’¾ ì €ì¥</button>
</div>

<!-- ===================== -->
<!--      MAIN PANEL       -->
<!-- ===================== -->
<div id="mainPanel">

  <!-- ëª¬ìŠ¤í„° -->
  <div id="monsterBox" class="card">
    <div id="monsterName"></div>
    <div class="bar" id="monsterHpBar">
      <div id="monsterHp" class="bar-fill hp"></div>
    </div>
  </div>

  <!-- ìŠ¤í‚¬ -->
  <div class="card">
    <b>ìŠ¤í‚¬</b>
    <button onclick="useSkill()">âš¡ POWER STRIKE (MP 20)</button>
  </div>

  <!-- ì§€ë„ -->
  <div class="card list">
    <b>ì§€ë„</b>
    <button onclick="moveMap(0)">ğŸŒ± ì¼ëª»íƒ€</button>
    <button onclick="moveMap(1)">ğŸŒ´ ê¸‰ëª»íƒ€</button>
    <button onclick="moveMap(2)">â„ ìœ ê¸°ì‚¬ì˜ ì°¨ê°€ìš´ ë†ë‹´</button>
    <button onclick="moveMap(3)">ğŸ½ ì‹íƒ</button>
    <button onclick="moveMap(4)">ğŸ§ª íŒ€ ë‚˜ë¹ </button>
    <button onclick="moveMap(5)">ğŸ’¬ ìœ ê¸°ì‚¬ ë””ìŠ¤ì½”ë“œ</button>
    <button onclick="moveMap(6)">ğŸ’€ ë¯¸1ì¹œë†ˆ ê²Œì„ì¦ˆ</button>
  </div>

  <!-- ìƒì  -->
  <div class="card list">
    <b>ìƒì </b>
    <button onclick="buyAtk()">ATK +1 (50G)</button>
    <button onclick="buyMp()">MP íšŒë³µ (30G)</button>
  </div>

  <!-- ë¡œê·¸ -->
  <div id="log" class="card"></div>
</div>

</div>

<!-- ===================== -->
<!--        SCRIPT         -->
<!-- ===================== -->
<script>
/* =====================
   ê¸°ë³¸ ìƒíƒœ
===================== */
let player={
  name:"",
  lv:1, atk:1,
  hp:100, maxHp:100,
  mp:50, maxMp:50,
  exp:0, nextExp:20,
  gold:0
};

let mapIndex=0;
let auto=false, autoTimer=null;

/* =====================
   ë§µ & ëª¬ìŠ¤í„° (ì›ë³¸ ìœ ì§€)
===================== */
const maps=[
  {name:"ì¼ëª»íƒ€"},
  {name:"ê¸‰ëª»íƒ€"},
  {name:"ìœ ê¸°ì‚¬ì˜ ì°¨ê°€ìš´ ë†ë‹´"},
  {name:"ì‹íƒ"},
  {name:"íŒ€ ë‚˜ë¹ "},
  {name:"ìœ ê¸°ì‚¬ ë””ìŠ¤ì½”ë“œ"},
  {name:"ë¯¸1ì¹œë†ˆ ê²Œì„ì¦ˆ"}
];

const monsters=[
  ["ì–´ë ¤ì›Œ í•˜ì‹œëŠ” ë©œë‹˜","ë²¨í‚¤ë‹˜"],
  ["ë˜ ëª»ê¹¨ê³  ìˆëŠ” ë©œë‹˜","ë¨¼ì €ê¹¬ ìš°ì°¸ë‹˜"],
  ["ì™•ì´ ë„˜ì–´ì§€ë©´? í‚¹ì½© ã…‹ã…‹ã…‹","ì•„ë‹ˆ ì‹¤ìˆ˜ë¡œ ë¼ì´ë²Œ ë“¤ì–´ê°"],
  ["ì˜·ì— ë–¨ì–´ì§„ ë°¥í’€","í›„ì‹ìœ¼ë¡  ì¤€ë¸Œë ˆë“œ ì—‰ë©ì´"],
  ["ì§­ ìœ ê¸°ì‚¬","ë©œë‹˜ìœ¼ë¡œ ìœ„ì¥í•œ ì¤€ë¸Œë ˆë“œ"],
  ["ìì¹¼ë‹˜","í‘í™”í•œ ë©œë‹˜","ë³´ìŠ¤: ìœ ê¸°ì‚¬ok"],
  ["ë¯¸1ì¹œë†ˆ ê²Œì„ì¦ˆ","ë² ì´ì»¨(ë¡œë¸” ì• ë‹ˆ)","ë³´ìŠ¤: ë¡œë¸” ì• ë‹ˆ ìœ ê¸°ì‚¬"]
];

let monster={
  name:"",
  hp:0,
  maxHp:0
};

/* =====================
   UI
===================== */
function ui(){
  lv.textContent=player.lv;
  atk.textContent=player.atk;
  gold.textContent=player.gold;
  hpBar.style.width=(player.hp/player.maxHp*100)+"%";
  mpBar.style.width=(player.mp/player.maxMp*100)+"%";
  expBar.style.width=(player.exp/player.nextExp*100)+"%";
  monsterHp.style.width=(monster.hp/monster.maxHp*100)+"%";
}

/* =====================
   ëª¬ìŠ¤í„°
===================== */
function spawn(){
  const list=monsters[mapIndex];
  monster.name=list[Math.floor(Math.random()*list.length)];
  monster.maxHp=50+mapIndex*40+player.lv*5;
  monster.hp=monster.maxHp;
  monsterName.textContent=monster.name;
  ui();
}

/* =====================
   ì „íˆ¬
===================== */
function attack(){
  monster.hp-=player.atk;
  log(`âš” ${monster.name} ê³µê²©!`);
  if(monster.hp<=0){
    win();
  }
  ui();
}
function win(){
  log(`ğŸ‰ ${monster.name} ì²˜ì¹˜!`);
  player.gold+=10+mapIndex*5;
  player.exp+=10+mapIndex*5;
  levelUp();
  spawn();
}
function levelUp(){
  while(player.exp>=player.nextExp){
    player.exp-=player.nextExp;
    player.lv++;
    player.atk++;
    player.maxHp+=10;
    player.maxMp+=5;
    player.hp=player.maxHp;
    player.mp=player.maxMp;
    player.nextExp=Math.floor(player.nextExp*1.3);
    log(`â¬† ë ˆë²¨ì—…! LV ${player.lv}`);
  }
}

/* =====================
   ìŠ¤í‚¬
===================== */
function useSkill(){
  if(player.mp<20){log("MP ë¶€ì¡±");return;}
  player.mp-=20;
  monster.hp-=player.atk*3;
  log("âš¡ POWER STRIKE!");
  if(monster.hp<=0) win();
  ui();
}

/* =====================
   ìë™ì‚¬ëƒ¥
===================== */
function toggleAuto(){
  auto=!auto;
  if(auto){
    autoTimer=setInterval(attack,500);
    log("ìë™ì‚¬ëƒ¥ ON");
  }else{
    clearInterval(autoTimer);
    log("ìë™ì‚¬ëƒ¥ OFF");
  }
}

/* =====================
   ê°•í™” / ìƒì 
===================== */
function upgrade(){
  if(player.gold<20){log("ê³¨ë“œ ë¶€ì¡±");return;}
  player.gold-=20;
  player.atk++;
  log("ğŸ”¥ ê°•í™” ì„±ê³µ");
  ui();
}
function buyAtk(){
  if(player.gold<50)return;
  player.gold-=50;
  player.atk++;
  ui();
}
function buyMp(){
  if(player.gold<30)return;
  player.gold-=30;
  player.mp=player.maxMp;
  ui();
}

/* =====================
   ì§€ë„
===================== */
function moveMap(i){
  if(i>mapIndex && player.lv<i*10){
    log("ë ˆë²¨ ë¶€ì¡±");
    return;
  }
  mapIndex=i;
  log(`${maps[i].name} ì´ë™`);
  spawn();
}

/* =====================
   ì €ì¥
===================== */
function saveGame(){
  localStorage.setItem("yugisa_save",JSON.stringify({player,mapIndex}));
  log("ì €ì¥ ì™„ë£Œ");
}
function loadGame(){
  const s=localStorage.getItem("yugisa_save");
  if(!s)return;
  const d=JSON.parse(s);
  player=d.player;
  mapIndex=d.mapIndex;
}

/* =====================
   ë‹‰ë„¤ì„
===================== */
function setName(){
  const v=nameInput.value.trim();
  if(!v)return;
  player.name=v;
  playerName.textContent=v;
  nameModal.style.display="none";
}

/* =====================
   ë¡œê·¸
===================== */
function log(t){
  logElem.innerHTML+=t+"<br>";
  logElem.scrollTop=9999;
}

/* =====================
   ì‹œì‘
===================== */
loadGame();
spawn();
ui();
</script>
</body>
</html>
