<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ìœ ê¸°ì‚¬ RPG</title>

<style>
body{
  margin:0;
  font-family:system-ui;
  background:#0b1020;
  color:#fff;
}
.app{
  max-width:1100px;
  margin:auto;
  padding:16px;
  display:grid;
  grid-template-columns:420px 1fr;
  gap:16px;
}
.card{
  background:rgba(255,255,255,0.05);
  padding:12px;
  border-radius:12px;
}
.hud{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:8px;
}
.hud div{
  background:rgba(255,255,255,0.08);
  padding:8px;
  border-radius:8px;
  text-align:center;
}
.btn{
  padding:8px 12px;
  border:none;
  border-radius:8px;
  background:#6c7cff;
  color:white;
  font-weight:bold;
  cursor:pointer;
}
.map-grid{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}
.map-node{
  flex:1 1 30%;
  background:rgba(255,255,255,0.08);
  padding:10px;
  border-radius:10px;
  text-align:center;
  cursor:pointer;
}
.map-node.locked{
  opacity:.4;
  cursor:not-allowed;
}
.hp-bar,.mp-bar{
  height:10px;
  background:#222;
  border-radius:8px;
  overflow:hidden;
}
.hp-fill{
  height:100%;
  background:linear-gradient(90deg,#ff4d4d,#ff9b9b);
}
.mp-fill{
  height:100%;
  background:linear-gradient(90deg,#4db6ff,#6befff);
}
.log{
  height:120px;
  overflow:auto;
  font-size:13px;
}
</style>
</head>

<body>
<div class="app">

<!-- LEFT -->
<div>
  <div class="card hud">
    <div>LV<br><b id="playerLv">1</b></div>
    <div>ATK<br><b id="atk">1</b></div>
    <div>ê°•í™”<br><b id="upgradeLv">1</b></div>
    <div>ğŸ’°<br><b id="coin">0</b></div>
    <div>EXP<br><b id="expText">0/5</b></div>
    <div>ì§ì—…<br><b id="jobText">ë©œë¡œìš°ê¸‰</b></div>
  </div>

  <div class="card">
    <b>ì§€ë„</b>
    <div class="map-grid" id="mapGrid"></div>
  </div>

  <div class="card">
    <b id="monsterName">ë©œë‹˜</b>
    <div class="hp-bar"><div class="hp-fill" id="hpFill"></div></div>
    <div class="mp-bar" style="margin-top:6px"><div class="mp-fill" id="mpFill"></div></div>
    <div style="margin-top:8px">
      <button class="btn" onclick="attack()">ê³µê²©</button>
      <button class="btn" onclick="upgrade()">ê°•í™”</button>
      <button class="btn" onclick="toggleAuto()">ìë™</button>
    </div>
  </div>
</div>

<!-- RIGHT -->
<div>
  <div class="card">
    <b>ë¡œê·¸</b>
    <div class="log" id="log"></div>
  </div>
</div>

</div>

<!-- ì‚¬ìš´ë“œ -->
<audio id="hitSound" src="https://assets.mixkit.co/sfx/preview/mixkit-quick-hit-2187.mp3"></audio>
<audio id="killSound" src="https://assets.mixkit.co/sfx/preview/mixkit-video-game-win-2016.mp3"></audio>

<script>
/* ===== ê²Œì„ ìƒíƒœ ===== */
let coins=0, atk=1, playerLv=1, exp=0, nextExp=5;
let upgradeLv=1;
let monsterHp=20, monsterMaxHp=20;
let auto=false, autoInt=null;
let currentArea=0;

/* ì§€ì—­ / ëª¬ìŠ¤í„° (ì›ë³¸ ìœ ì§€) */
const areas=[
 {name:"ğŸŒ± ì¼ëª»íƒ€",lv:1},
 {name:"ğŸŒ´ ê¸‰ëª»íƒ€",lv:10},
 {name:"â„ ìœ ê¸°ì‚¬ì˜ ì°¨ê°€ìš´ ë†ë‹´",lv:20},
 {name:"ğŸœ ì‹íƒ",lv:30},
 {name:"ğŸŒ‹ íŒ€ ë‚˜ë¹ ",lv:40},
 {name:"ğŸŒŒ ìœ ê¸°ì‚¬ ë””ìŠ¤ì½”ë“œ",lv:50}
];

const monsters=[
 ["ì–´ë ¤ì›Œ í•˜ì‹œëŠ” ë©œë‹˜","ë²¨í‚¤ë‹˜"],
 ["ë˜ ëª»ê¹¨ëŠ” ë©œë‹˜","ìš°ì°¸ë‹˜"],
 ["ì™•ì´ ë„˜ì–´ì§€ë©´? í‚¹ì½©","ë¼ì´ë²Œ"],
 ["ì˜·ì— ë–¨ì–´ì§„ ë°¥í’€"],
 ["ì§­ ìœ ê¸°ì‚¬"],
 ["ìì¹¼ë‹˜","ë³´ìŠ¤: ìœ ê¸°ì‚¬ok"]
];

/* UI */
const logEl=document.getElementById("log");
const mapGrid=document.getElementById("mapGrid");

/* ë¡œê·¸ */
function log(t){
  const d=document.createElement("div");
  d.textContent=t;
  logEl.prepend(d);
}

/* ì§€ë„ */
function renderMap(){
  mapGrid.innerHTML="";
  areas.forEach((a,i)=>{
    const d=document.createElement("div");
    d.className="map-node"+(playerLv<a.lv?" locked":"");
    d.innerHTML=`<b>${a.name}</b><br><small>LV ${a.lv}</small>`;
    d.onclick=()=>{
      if(playerLv<a.lv){log("ë ˆë²¨ ë¶€ì¡±");return;}
      currentArea=i;
      spawnMonster();
      log(a.name+" ì´ë™");
    };
    mapGrid.appendChild(d);
  });
}

/* ëª¬ìŠ¤í„° */
function spawnMonster(){
  monsterMaxHp=30+currentArea*40;
  monsterHp=monsterMaxHp;
  document.getElementById("monsterName").textContent=
    monsters[currentArea][Math.floor(Math.random()*monsters[currentArea].length)];
  updateUI();
}

/* ì „íˆ¬ */
function attack(){
  monsterHp-=atk;
  document.getElementById("hitSound").play();
  if(monsterHp<=0){
    document.getElementById("killSound").play();
    coins+=10+currentArea*5;
    exp+=5+currentArea*3;
    levelUp();
    spawnMonster();
  }
  updateUI();
}

/* ë ˆë²¨ì—… */
function levelUp(){
  while(exp>=nextExp){
    exp-=nextExp;
    nextExp=Math.floor(nextExp*1.3);
    playerLv++;
    atk++;
    log("ë ˆë²¨ì—…!");
  }
}

/* ê°•í™” */
function upgrade(){
  if(coins<20){log("ê³¨ë“œ ë¶€ì¡±");return;}
  coins-=20;
  if(Math.random()<0.8){
    upgradeLv++; atk++;
    log("ê°•í™” ì„±ê³µ");
  }else log("ê°•í™” ì‹¤íŒ¨");
  updateUI();
}

/* ìë™ */
function toggleAuto(){
  auto=!auto;
  if(auto){
    autoInt=setInterval(attack,300);
    log("ìë™ ì‹œì‘");
  }else{
    clearInterval(autoInt);
    log("ìë™ ì¤‘ì§€");
  }
}

/* UI */
function updateUI(){
  playerLv.textContent=playerLv;
  atk.textContent=atk;
  coin.textContent=coins;
  upgradeLv.textContent=upgradeLv;
  expText.textContent=`${exp}/${nextExp}`;
  hpFill.style.width=(monsterHp/monsterMaxHp*100)+"%";
}

/* ì‹œì‘ */
renderMap();
spawnMonster();
updateUI();
</script>
</body>
</html>
