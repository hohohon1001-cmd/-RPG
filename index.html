<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ìœ ê¸°ì‚¬ RPG â€“ ëì—†ëŠ” ê°•í™”</title>

<style>
body {
    margin: 0;
    height: 100vh;
    background: radial-gradient(circle at top, #2b2d31, #000);
    font-family: 'Segoe UI', sans-serif;
    color: #dbdee1;
    display: flex;
    justify-content: center;
    align-items: center;
}

.container {
    width: 94%;
    max-width: 480px;
    background: linear-gradient(180deg,#1e1f22,#121316);
    border-radius: 28px;
    padding: 18px;
    box-shadow: 0 0 50px rgba(0,0,0,.9);
}

/* HUD */
.hud {
    display: flex;
    gap: 6px;
}
.hud-box {
    flex: 1;
    background: #0f1012;
    border-radius: 16px;
    text-align: center;
    padding: 6px 0;
    font-size: 12px;
}
.hud-box span {
    display: block;
    font-size: 18px;
    font-weight: bold;
}

/* AREA */
.area {
    text-align: center;
    margin: 10px 0 6px;
    color: #9fa1ff;
    font-weight: bold;
}

/* MONSTER */
.monster {
    background: radial-gradient(circle at top,#1b1c20,#0b0c0f);
    border-radius: 26px;
    padding: 26px 14px;
    text-align: center;
    cursor: pointer;
    user-select: none;
}
.monster-name {
    font-size: 22px;
}
.hp-bar {
    width: 100%;
    height: 14px;
    background: #111;
    border-radius: 10px;
    overflow: hidden;
    margin-top: 10px;
}
.hp-fill {
    height: 100%;
    background: linear-gradient(90deg,#ff3b3b,#ff7b7b);
    width: 100%;
    transition: width .1s;
}

/* BUTTON */
.btn {
    width: 100%;
    margin-top: 8px;
    padding: 14px;
    font-size: 15px;
    font-weight: bold;
    border-radius: 18px;
    border: none;
    cursor: pointer;
    color: white;
    background: linear-gradient(#5865F2,#404EED);
}

.btn.awaken {
    background: linear-gradient(90deg,gold,red,purple);
}

/* SHOP */
.shop {
    margin-top: 10px;
    background: #0f1012;
    border-radius: 18px;
    padding: 10px;
    font-size: 13px;
}

/* LOG */
.log {
    text-align: center;
    margin-top: 6px;
    font-size: 13px;
    color: #aaa;
}
</style>
</head>

<body>
<div class="container">

<!-- HUD -->
<div class="hud">
    <div class="hud-box">LV<span id="playerLv">1</span></div>
    <div class="hud-box">EXP<span id="expText">0/10</span></div>
    <div class="hud-box">ATK<span id="atk">1</span></div>
    <div class="hud-box">ğŸ’°<span id="coin">0</span></div>
</div>

<div id="areaText" class="area">ğŸŒ± ì´ˆì›</div>

<!-- MONSTER -->
<div class="monster" onclick="attack()">
    <div id="monsterName" class="monster-name">ìŠ¬ë¼ì„</div>
    <div class="hp-bar">
        <div id="hpFill" class="hp-fill"></div>
    </div>
</div>

<button id="upgradeBtn" class="btn" onclick="upgrade()">ğŸ”§ ê°•í™” (<span id="chanceText">90</span>%)</button>
<button class="btn" onclick="toggleIdle()">â³ ë°©ì¹˜: <span id="idleText">OFF</span></button>

<!-- SHOP -->
<div class="shop">
    ğŸ›’ ìƒì <br>
    <button class="btn" onclick="buyAtk()">ATK +1 (50ğŸ’°)</button>
</div>

<div id="log" class="log">ì—¬ì •ì´ ì‹œì‘ë˜ì—ˆë‹¤â€¦</div>

</div>

<!-- SOUND -->
<audio id="hitSound" src="https://assets.mixkit.co/sfx/preview/mixkit-quick-hit-2187.mp3"></audio>
<audio id="upgradeSound" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3"></audio>

<script>
/* =====================
   PLAYER
===================== */
let coins = 0;
let atk = 1;

let playerLv = 1;
let exp = 0;
let nextExp = 10;

let upgradeLv = 1;
let upgradeChance = 90;

/* =====================
   MONSTER
===================== */
let monsterHp = 10;
let monsterMaxHp = 10;
let kills = 0;

/* =====================
   IDLE
===================== */
let idle = false;
let idleTimer = null;

/* =====================
   AREA DATA
===================== */
const areas = [
    {name:"ğŸŒ± ì´ˆì›", minLv:1},
    {name:"ğŸŒ´ ë°€ë¦¼", minLv:10},
    {name:"â„ ëˆˆ", minLv:20},
    {name:"ğŸŒ‹ í™”ì‚°", minLv:30},
    {name:"ğŸŒŒ ê³µí—ˆ", minLv:40}
];

const monsters = [
    "ìŠ¬ë¼ì„","ê³ ë¸”ë¦°","ë¹™ê²°ìˆ˜","í™”ì—¼ë ¹","ì´ë¦„ ì—†ëŠ” ì¡´ì¬"
];

/* =====================
   SAVE / LOAD
===================== */
function save() {
    localStorage.setItem("yugisaRPG", JSON.stringify({
        coins, atk, playerLv, exp, nextExp,
        upgradeLv, upgradeChance, kills
    }));
}

function load() {
    const s = JSON.parse(localStorage.getItem("yugisaRPG"));
    if (!s) return;
    coins = s.coins;
    atk = s.atk;
    playerLv = s.playerLv;
    exp = s.exp;
    nextExp = s.nextExp;
    upgradeLv = s.upgradeLv;
    upgradeChance = s.upgradeChance;
    kills = s.kills;
}

/* =====================
   AREA INDEX
===================== */
function areaIndex() {
    let idx = 0;
    for (let i=0;i<areas.length;i++) {
        if (playerLv >= areas[i].minLv) idx = i;
    }
    return idx;
}

/* =====================
   SPAWN MONSTER
===================== */
function spawnMonster() {
    const area = areaIndex();
    monsterMaxHp = 15 + area*20 + kills*2;
    monsterHp = monsterMaxHp;

    monsterName.textContent = monsters[area];
    areaText.textContent = areas[area].name;

    updateUI();
}

/* =====================
   ATTACK
===================== */
function attack() {
    monsterHp -= atk;
    hitSound.play();

    if (monsterHp <= 0) {
        kills++;

        coins += 10 + areaIndex()*5;
        exp += 6 + areaIndex()*4;

        levelUpCheck();
        spawnMonster();
    }
    updateUI();
}

/* =====================
   LEVEL UP
===================== */
function levelUpCheck() {
    while (exp >= nextExp) {
        exp -= nextExp;
        playerLv++;
        nextExp = Math.floor(nextExp * 1.5);
        atk++;

        log.textContent = `ğŸ‰ ë ˆë²¨ì—…! LV ${playerLv}`;
    }
}

/* =====================
   UPGRADE
===================== */
function upgrade() {
    const cost = 20 + upgradeLv*10;
    if (coins < cost) {
        log.textContent = "ğŸ’¸ ì½”ì¸ì´ ë¶€ì¡±í•˜ë‹¤";
        return;
    }

    coins -= cost;

    let realChance = upgradeChance;
    if (upgradeLv >= 10) realChance = Math.min(95, upgradeChance + 10);

    if (Math.random()*100 <= realChance) {
        upgradeLv++;
        atk += upgradeLv >= 10 ? 2 : 1;
        upgradeChance = Math.max(10, upgradeChance - 2);
        upgradeSound.play();
        log.textContent = "ğŸ”¥ ê°•í™” ì„±ê³µ!";
    } else {
        log.textContent = "ğŸ’€ ê°•í™” ì‹¤íŒ¨â€¦";
    }
    updateUI();
}

/* =====================
   SHOP
===================== */
function buyAtk() {
    if (coins < 50) return;
    coins -= 50;
    atk++;
    log.textContent = "ATK +1 êµ¬ë§¤!";
    updateUI();
}

/* =====================
   IDLE
===================== */
function toggleIdle() {
    idle = !idle;
    idleText.textContent = idle ? "ON" : "OFF";

    if (idle) {
        idleTimer = setInterval(attack, 1000);
    } else {
        clearInterval(idleTimer);
    }
}

/* =====================
   UI
===================== */
function updateUI() {
    hpFill.style.width = (monsterHp / monsterMaxHp * 100) + "%";

    coin.textContent = coins;
    atk.textContent = atk;
    playerLv.textContent = playerLv;
    expText.textContent = `${exp}/${nextExp}`;
    chanceText.textContent = upgradeChance;

    if (upgradeLv >= 10) {
        upgradeBtn.classList.add("awaken");
        upgradeBtn.textContent = "ğŸ”¥ ê°ì„± ê°•í™”";
    }

    save();
}

/* =====================
   START
===================== */
load();
spawnMonster();
updateUI();
</script>
</body>
</html>
