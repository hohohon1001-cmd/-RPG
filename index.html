<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Yugisa RPG</title>

<style>
body{
  margin:0;
  font-family: 'Pretendard', Arial, sans-serif;
  background: linear-gradient(180deg,#0f2027,#203a43,#2c5364);
  color:white;
}
.game{
  display:grid;
  grid-template-columns: 260px 1fr 260px;
  gap:14px;
  padding:14px;
}
.card{
  background: rgba(0,0,0,0.45);
  border-radius:14px;
  padding:12px;
  box-shadow:0 0 15px rgba(0,0,0,0.4);
}
button{
  background: linear-gradient(135deg,#00c6ff,#0072ff);
  border:none;
  border-radius:10px;
  padding:10px;
  color:white;
  cursor:pointer;
  font-weight:bold;
}
button:hover{ filter:brightness(1.15); }

.map-grid{
  display:grid;
  grid-template-columns: repeat(2,1fr);
  gap:8px;
}
.map-btn{
  background: rgba(255,255,255,0.1);
  border:1px solid rgba(255,255,255,0.2);
}
.map-btn.locked{
  opacity:0.4;
  cursor:not-allowed;
}

.bar{
  height:16px;
  background:#333;
  border-radius:8px;
  overflow:hidden;
}
.bar-inner{
  height:100%;
  background:linear-gradient(90deg,#00ff99,#00ccff);
}

.center{
  text-align:center;
}
.small{ font-size:13px; opacity:0.85; }
</style>
</head>

<body>

<div class="game">

  <!-- LEFT -->
  <div>
    <div class="card">
      <div><b>ë ˆë²¨</b> <span id="lv">1</span></div>
      <div class="small">EXP</div>
      <div class="bar"><div id="expBar" class="bar-inner"></div></div>
      <div class="small">MP</div>
      <div class="bar"><div id="mpBar" class="bar-inner"></div></div>
    </div>

    <div class="card map">
      <b>ğŸ—º ì§€ë„</b>
      <div class="map-grid" id="mapGrid"></div>
    </div>
  </div>

  <!-- CENTER -->
  <div>
    <div class="card center">
      <div id="areaText">ğŸŒ± ì¼ëª»íƒ€</div>
      <h2 id="monsterName">ëª¬ìŠ¤í„°</h2>
      <div class="bar"><div id="hpBar" class="bar-inner"></div></div>
      <br>
      <button onclick="attack()">âš” ê³µê²©</button>
    </div>
  </div>

  <!-- RIGHT -->
  <div>
    <div class="card">
      <b>ë¡œê·¸</b>
      <div id="log" class="small">ê²Œì„ ì‹œì‘!</div>
    </div>
  </div>

</div>

<!-- ì‚¬ìš´ë“œ -->
<audio id="hitSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_8e8b3c87e4.mp3"></audio>
<audio id="failSound" src="https://cdn.pixabay.com/audio/2022/03/10/audio_93f9f6b60d.mp3"></audio>
<audio id="bgm" src="https://cdn.pixabay.com/audio/2022/10/16/audio_5db2c7a3fa.mp3" loop></audio>

<script>
/* =====================
   ê¸°ë³¸ ìƒíƒœ
===================== */
let playerLv=1, exp=0, nextExp=50;
let mp=50, maxMp=50;
let atk=5;
let currentArea=0;
let monsterHp=30, monsterMaxHp=30;

const areas=[
  {name:"ğŸŒ± ì¼ëª»íƒ€", lv:1},
  {name:"ğŸŒ´ ê¸‰ëª»íƒ€", lv:10},
  {name:"â„ ìœ ê¸°ì‚¬ì˜ ì°¨ê°€ìš´ ë†ë‹´", lv:20},
  {name:"ğŸœ ì‹íƒ", lv:30}
];

const monsters=[
  ["ìŠ¬ë¼ì„","ë²„ì„¯"],
  ["ì •ê¸€ëª¹","ë…ë±€"],
  ["ì„¤ì¸","ì–¼ìŒê³¨ë ˜"],
  ["ë¯¸ì´ë¼","ì‚¬ë§‰ë²Œ"]
];

/* =====================
   DOM
===================== */
const lvElem=document.getElementById("lv");
const expBar=document.getElementById("expBar");
const mpBar=document.getElementById("mpBar");
const monsterName=document.getElementById("monsterName");
const hpBar=document.getElementById("hpBar");
const log=document.getElementById("log");
const areaText=document.getElementById("areaText");
const mapGrid=document.getElementById("mapGrid");

const hitSound=document.getElementById("hitSound");
const failSound=document.getElementById("failSound");
const bgm=document.getElementById("bgm");

/* =====================
   ì‚¬ìš´ë“œ í™œì„±í™”
===================== */
document.body.addEventListener("click",()=>{
  bgm.volume=0.4;
  bgm.play().catch(()=>{});
},{once:true});

/* =====================
   ì§€ë„
===================== */
function renderMap(){
  mapGrid.innerHTML="";
  areas.forEach((a,i)=>{
    const b=document.createElement("button");
    b.className="map-btn";
    b.textContent=a.name;
    if(playerLv<a.lv){
      b.classList.add("locked");
      b.onclick=()=>failSound.play();
    }else{
      b.onclick=()=>moveArea(i);
    }
    mapGrid.appendChild(b);
  });
}

function moveArea(i){
  currentArea=i;
  areaText.textContent=areas[i].name;
  spawnMonster();
  log.textContent=`ğŸ—º ${areas[i].name} ì´ë™`;
}

/* =====================
   ëª¬ìŠ¤í„°
===================== */
function spawnMonster(){
  const list=monsters[currentArea];
  monsterName.textContent=list[Math.floor(Math.random()*list.length)];
  monsterMaxHp=30+currentArea*40;
  monsterHp=monsterMaxHp;
  updateUI();
}

/* =====================
   ì „íˆ¬
===================== */
function attack(){
  if(mp<5){
    failSound.play();
    log.textContent="ë§ˆë‚˜ ë¶€ì¡±!";
    return;
  }
  mp-=5;
  monsterHp-=atk;
  hitSound.play();
  if(monsterHp<=0){
    exp+=15;
    log.textContent="ëª¬ìŠ¤í„° ì²˜ì¹˜!";
    spawnMonster();
  }
  levelCheck();
  updateUI();
}

/* =====================
   ë ˆë²¨ì—…
===================== */
function levelCheck(){
  if(exp>=nextExp){
    exp-=nextExp;
    playerLv++;
    nextExp=Math.floor(nextExp*1.4);
    maxMp+=10;
    mp=maxMp;
    log.textContent=`ğŸ‰ ë ˆë²¨ì—…! LV ${playerLv}`;
    renderMap();
  }
}

/* =====================
   UI
===================== */
function updateUI(){
  lvElem.textContent=playerLv;
  expBar.style.width=(exp/nextExp*100)+"%";
  mpBar.style.width=(mp/maxMp*100)+"%";
  hpBar.style.width=(monsterHp/monsterMaxHp*100)+"%";
}

/* =====================
   ì‹œì‘
===================== */
renderMap();
spawnMonster();
updateUI();
</script>

</body>
</html>
