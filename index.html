<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì›¹ RPG</title>

<style>
*{box-sizing:border-box;font-family:Pretendard,system-ui;color:#fff}
body{
  margin:0;
  background:#000;
  background-size:cover;
  background-position:center;
  transition:background 0.5s;
}

/* ì „ì²´ ë ˆì´ì•„ì›ƒ */
#app{
  display:flex;
  gap:20px;
  padding:20px;
}
.panel{
  background:rgba(20,20,40,0.75);
  backdrop-filter:blur(12px);
  border-radius:16px;
  padding:16px;
}

/* ì™¼ìª½ */
#left{width:320px}

/* ì˜¤ë¥¸ìª½ */
#right{flex:1}

/* ì¹´ë“œ */
.card{
  background:rgba(0,0,0,0.35);
  padding:12px;
  border-radius:12px;
  margin-bottom:12px;
}

/* ë²„íŠ¼ */
button{
  background:#5865f2;
  border:none;
  border-radius:10px;
  padding:10px;
  width:100%;
  margin-top:6px;
  font-weight:700;
  cursor:pointer;
}
button.red{background:#f25f5c}
button.green{background:#2ecc71}

/* ì²´ë ¥ë°” */
.bar{
  height:12px;
  background:#333;
  border-radius:6px;
  overflow:hidden;
}
.bar > div{
  height:100%;
  background:linear-gradient(90deg,#ff6a6a,#ff9f9f);
}

/* MP */
.mp > div{
  background:linear-gradient(90deg,#4facfe,#00f2fe);
}

/* ì§€ë„ */
.mapBtn{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:6px;
  background:#3944bc;
  padding:8px;
  border-radius:8px;
  cursor:pointer;
}

/* ë¡œê·¸ */
#log{
  height:120px;
  overflow:auto;
  font-size:13px;
  opacity:0.9;
}

/* ëª¨ë°”ì¼ */
@media(max-width:900px){
  #app{flex-direction:column}
  #left{width:100%}
}
</style>
</head>

<body>

<div id="app">

<!-- LEFT -->
<div id="left" class="panel">

<div class="card">
<b>LV</b> <span id="lv"></span><br>
<b>ATK</b> <span id="atk"></span><br>
<b>GOLD</b> <span id="gold"></span>
</div>

<div class="card">
<b>EXP</b> <span id="exp"></span>/<span id="need"></span>
<div class="bar"><div id="expBar"></div></div>
</div>

<div class="card">
<b>HP</b>
<div class="bar"><div id="hpBar"></div></div>
<b>MP</b>
<div class="bar mp"><div id="mpBar"></div></div>
</div>

<button onclick="attack()">âš” ê³µê²©</button>
<button onclick="toggleAuto()">ğŸ¤– ìë™ì‚¬ëƒ¥</button>
<button onclick="upgrade()">ğŸ”¥ ê°•í™”</button>
<button onclick="save()">ğŸ’¾ ì €ì¥</button>

</div>

<!-- RIGHT -->
<div id="right" class="panel">

<div class="card">
<b id="monsterName"></b>
<div class="bar"><div id="monsterHpBar"></div></div>
</div>

<div class="card">
<b>ìŠ¤í‚¬</b>
<button onclick="skill()">âš¡ POWER STRIKE (MP20)</button>
</div>

<div class="card">
<b>ì§€ë„</b>
<div id="mapList"></div>
</div>

<div class="card">
<b>ìƒì </b>
<button onclick="buyAtk()">ATK +1 (50G)</button>
<button onclick="buyMp()">MP íšŒë³µ (30G)</button>
</div>

<div class="card">
<b>ë­í‚¹</b>
<div id="rank"></div>
</div>

<div class="card">
<b>ë¡œê·¸</b>
<div id="log"></div>
</div>

</div>
</div>

<script>
/* ===================== ë°ì´í„° ===================== */

let player={
  lv:1, atk:1, gold:0,
  exp:0, need:10,
  hp:100, mp:50, maxHp:100, maxMp:50
};

let maps=[
 {name:"ì´ˆì›", bg:"https://images.unsplash.com/photo-1501785888041-af3ef285b470",
  monsters:[
   {name:"ìŠ¬ë¼ì„",hp:30,exp:3,gold:2},
   {name:"ê³ ë¸”ë¦°",hp:50,exp:5,gold:4}
  ]},
 {name:"ë°€ë¦¼", bg:"https://images.unsplash.com/photo-1500530855697-b586d89ba3ee",
  monsters:[
   {name:"ë…ê±°ë¯¸",hp:80,exp:8,gold:6},
   {name:"ì •ê¸€ì „ì‚¬",hp:120,exp:12,gold:10}
  ]},
 {name:"ë¯¸1ì¹œë†ˆ ê²Œì„ì¦ˆ", bg:"https://images.unsplash.com/photo-1519681393784-d120267933ba",
  monsters:[
   {name:"ë²„ê·¸ëª¬",hp:150,exp:15,gold:20},
   {name:"ì—ëŸ¬ë¹„ìŠ¤íŠ¸",hp:200,exp:20,gold:30},
   {name:"ì„œë²„íŒŒê´´ì",hp:400,exp:50,gold:100}
  ]}
];

let curMap=0, curMonster=0;
let mHp=maps[0].monsters[0].hp;
let autoTimer=null;

/* ===================== í•¨ìˆ˜ ===================== */

function log(t){
  logDiv.innerHTML += t+"<br>";
  logDiv.scrollTop=9999;
}

function refresh(){
  lv.textContent=player.lv;
  atk.textContent=player.atk;
  gold.textContent=player.gold;
  exp.textContent=player.exp;
  need.textContent=player.need;

  expBar.style.width=(player.exp/player.need*100)+"%";
  hpBar.style.width=(player.hp/player.maxHp*100)+"%";
  mpBar.style.width=(player.mp/player.maxMp*100)+"%";

  let m=maps[curMap].monsters[curMonster];
  monsterName.textContent=m.name;
  monsterHpBar.style.width=(mHp/m.hp*100)+"%";

  document.body.style.backgroundImage=`url(${maps[curMap].bg})`;
  rank.textContent=`LV ${player.lv} / GOLD ${player.gold}`;
}

function attack(){
  let m=maps[curMap].monsters[curMonster];
  mHp-=player.atk;
  if(mHp<=0){
    player.exp+=m.exp;
    player.gold+=m.gold;
    log(m.name+" ì²˜ì¹˜!");
    if(player.exp>=player.need){
      player.exp=0;
      player.lv++;
      player.need+=10;
      player.atk++;
      log("ë ˆë²¨ì—…!");
    }
    curMonster=(curMonster+1)%maps[curMap].monsters.length;
    mHp=maps[curMap].monsters[curMonster].hp;
  }
  refresh();
}

function toggleAuto(){
  if(autoTimer){
    clearInterval(autoTimer);
    autoTimer=null;
    log("ìë™ì‚¬ëƒ¥ OFF");
  }else{
    autoTimer=setInterval(attack,800);
    log("ìë™ì‚¬ëƒ¥ ON");
  }
}

function upgrade(){
  let cost=player.atk*20;
  if(player.gold>=cost){
    player.gold-=cost;
    player.atk++;
    log("ê°•í™” ì„±ê³µ");
    refresh();
  }
}

function skill(){
  if(player.mp<20)return;
  player.mp-=20;
  mHp-=player.atk*3;
  log("POWER STRIKE!");
  refresh();
}

function buyAtk(){
  if(player.gold>=50){
    player.gold-=50;
    player.atk++;
    refresh();
  }
}

function buyMp(){
  if(player.gold>=30){
    player.gold-=30;
    player.mp=player.maxMp;
    refresh();
  }
}

function save(){
  localStorage.setItem("rpgSave",JSON.stringify(player));
  log("ì €ì¥ë¨");
}

/* ì§€ë„ ìƒì„± */
maps.forEach((m,i)=>{
  let d=document.createElement("div");
  d.className="mapBtn";
  d.innerHTML=`${m.name}<span>ì´ë™</span>`;
  d.onclick=()=>{
    curMap=i;
    curMonster=0;
    mHp=maps[i].monsters[0].hp;
    log(m.name+" ì´ë™");
    refresh();
  };
  mapList.appendChild(d);
});

/* ë¡œë“œ */
let s=localStorage.getItem("rpgSave");
if(s)player=JSON.parse(s);

refresh();
</script>

</body>
</html>
