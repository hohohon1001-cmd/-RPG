<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ìœ ê¸°ì‚¬ RPG â€“ ë¦¬ë©”ì´í¬ (ì§€ë„/ìƒì /ìŠ¤í‚¬)</title>
<style>
:root{
  --bg-color-1:#071027;
  --bg-color-2:#0f1530;
  --accent:#7c8cff;
  --accent-2:#ff9b9b;
  --glass: rgba(255,255,255,0.04);
  --card: rgba(255,255,255,0.03);
  --glass-2: rgba(255,255,255,0.02);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter, "Segoe UI", Roboto, system-ui, -apple-system; background:linear-gradient(180deg,var(--bg-color-1),#020212);color:#e6e8ff}
body{
  background-image: url('https://images.unsplash.com/photo-1501785888041-af3ef285b470?auto=format&fit=crop&w=1800&q=60');
  background-size:cover;
  background-position:center;
  display:flex;align-items:center;justify-content:center;padding:28px;
}

/* ì»¨í…Œì´ë„ˆ */
.app{
  width:100%; max-width:1100px; border-radius:20px; overflow:hidden;
  background: linear-gradient(180deg, rgba(2,6,23,0.6), rgba(1,3,10,0.8));
  box-shadow: 0 10px 50px rgba(0,0,0,0.7);
  display:grid; grid-template-columns: 420px 1fr; gap:18px; padding:18px;
  backdrop-filter: blur(6px);
}

/* ì¢Œì¸¡ ì»¬ëŸ¼ â€“ í”Œë ˆì´/ì •ë³´ */
.left{
  display:flex; flex-direction:column; gap:12px;
}

/* HUD ì¹´ë“œ */
.hud{
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
  border-radius:14px; padding:12px; box-shadow: 0 6px 18px rgba(0,0,0,0.6);
}
.hud-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
.hud-item{background:var(--card);padding:8px;border-radius:10px;text-align:center;font-size:13px}
.hud-item .label{font-size:11px;color:#b9c0ff}
.hud-item .value{font-weight:700;font-size:18px;margin-top:6px;color:var(--accent)}

/* MP bar + HP bar inside monster card */
.center-card{
  background: linear-gradient(180deg, rgba(10,14,30,0.5), rgba(5,7,12,0.5));
  border-radius:14px;padding:14px; box-shadow: 0 8px 20px rgba(0,0,0,0.6);
}

/* ë§µ ì¹´ë“œ */
.map{
  background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:12px;padding:10px; display:flex;flex-direction:column;gap:8px;
}
.map-grid{display:flex;gap:8px;flex-wrap:wrap}
.map-node{
  flex: 1 1 30%; min-width:110px; padding:10px; border-radius:10px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  text-align:center; cursor:pointer; transition:transform .12s;
  border:1px solid rgba(255,255,255,0.03);
}
.map-node.locked{opacity:0.45; filter:grayscale(40%); cursor:not-allowed}
.map-node:hover{transform:translateY(-6px)}

/* ëª¬ìŠ¤í„° ì¹´ë“œ */
.monster-card{border-radius:14px;padding:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); box-shadow:0 10px 30px rgba(0,0,0,0.6); text-align:center}
.monster-name{font-size:20px;font-weight:700;margin-bottom:8px}
.hp-bar{height:12px;background:#111;border-radius:8px;overflow:hidden}
.hp-fill{height:100%;background:linear-gradient(90deg,#ff3b3b,#ff9b9b);width:100%;transition:width .08s linear}

/* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.btn{
  display:inline-block;padding:10px 12px;border-radius:12px;border:none;cursor:pointer;color:white;font-weight:700;
  background:linear-gradient(90deg,var(--accent),#5b62e8); box-shadow:0 6px 18px rgba(92,97,214,0.16);
}
.btn.secondary{background:linear-gradient(90deg,#2e7bff,#00d4a5); box-shadow:0 6px 18px rgba(0,212,165,0.12)}
.btn.warn{background:linear-gradient(90deg,#ff7b7b,#ffb86b); color:#110f0f}
.row{display:flex;gap:8px;align-items:center}
.col{display:flex;flex-direction:column;gap:8px}

/* ì˜¤ë¥¸ìª½ â€“ ìƒì /ë¡œê·¸/ìŠ¤í‚¬/ì¸ë²¤í† ë¦¬ */
.right{
  display:flex;flex-direction:column;gap:12px;
}

/* ìƒì /ë¡œê·¸ ì¹´ë“œ */
.card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:12px;border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.6)}
.shop-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
.shop-item{padding:10px;border-radius:10px;background:linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));text-align:center}
.small{font-size:12px;color:#bfc7ff}
.badge{background:rgba(0,0,0,0.25);padding:6px 8px;border-radius:10px;font-weight:700;color:#fff}

/* ìŠ¤í‚¬ ë²„íŠ¼ */
.skill-row{display:flex;gap:8px}
.skill-btn{flex:1;padding:10px;border-radius:10px;background:linear-gradient(90deg,#ff8b8b,#ffc26f);color:#110; font-weight:800;cursor:pointer;position:relative;overflow:hidden}
.cooldown{position:absolute;left:0;top:0;height:100%;background:rgba(0,0,0,0.45);width:0%;transition:width .2s linear;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:800}

/* ë¡œê·¸ */
.log{height:90px; overflow:auto; font-size:13px; color:#cfd6ff; padding:8px; border-radius:8px; background:linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));}

/* responsive */
@media(max-width:980px){
  .app{grid-template-columns:1fr; padding:12px}
}
</style>
</head>
<body>
<div class="app" id="app">
  <!-- LEFT -->
  <div class="left">
    <div class="hud">
      <div class="hud-grid">
        <div class="hud-item">
          <div class="label">LV</div>
          <div class="value" id="playerLv">1</div>
        </div>
        <div class="hud-item">
          <div class="label">ì§ì—…</div>
          <div class="value" id="jobText">ë©œë¡œìš°ê¸‰</div>
        </div>
        <div class="hud-item">
          <div class="label">ATK</div>
          <div class="value" id="atk">1</div>
        </div>

        <div class="hud-item">
          <div class="label">ê°•í™”</div>
          <div class="value" id="upgradeLv">1</div>
        </div>
        <div class="hud-item">
          <div class="label">ğŸ’°</div>
          <div class="value" id="coin">0</div>
        </div>
        <div class="hud-item">
          <div class="label">EXP</div>
          <div class="value" id="expText">0/10</div>
        </div>

        <!-- ìƒˆë¡œ ì¶”ê°€: HUD MP ë°” -->
        <div class="hud-item" style="grid-column: span 3;">
          <div class="label">MP</div>
          <div style="height:14px;background:#111;border-radius:8px;overflow:hidden;margin-top:4px">
            <div id="hudMpFill" style="height:100%;width:100%;background:linear-gradient(90deg,#6befff,#4db6ff);transition:width .2s;"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- MAP -->
    <div class="map card">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong>ì§€ë„</strong>
        <span class="small">í´ë¦­í•˜ë©´ í•´ë‹¹ ì§€ì—­ìœ¼ë¡œ ì´ë™(ë ˆë²¨ì¡°ê±´ ì¶©ì¡± ì‹œ)</span>
      </div>
      <div class="map-grid" id="mapGrid" style="margin-top:8px"></div>
    </div>

    <!-- ëª¬ìŠ¤í„° ì¹´ë“œ -->
    <div class="center-card monster-card">
      <div class="monster-name" id="monsterName">ë©œë‹˜</div>
      <div class="hp-bar" style="margin-bottom:8px"><div id="hpFill" class="hp-fill"></div></div>
      <div class="row" style="justify-content:space-between; margin-top:8px">
        <button class="btn" onclick="attack()">ê³µê²©</button>
        <button class="btn secondary" id="autoBtn" onclick="toggleAuto()">ğŸ¤– ìë™ì‚¬ëƒ¥ OFF</button>
        <button class="btn warn" id="upgradeBtn" onclick="upgrade()">ğŸ”§ ê°•í™” (<span id="upgradeCost">20</span>)</button>
      </div>
      <div style="margin-top:10px" class="row">
        <div style="flex:1">
          <div class="small">MP</div>
          <div style="height:10px;background:#111;border-radius:8px;overflow:hidden"><div id="mpFill" style="height:100%;width:100%;background:linear-gradient(90deg,#6befff,#4db6ff);"></div></div>
        </div>
        <div style="width:110px;text-align:right">
          <div class="small">Level</div>
          <div style="font-weight:800" id="playerLvSmall">1</div>
        </div>
      </div>
    </div>
  </div>

  <!-- RIGHT -->
  <div class="right">
    <!-- SHOP -->
    <div class="card">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong>ìƒì </strong>
        <span class="small">ê³¨ë“œë¡œ ì•„ì´í…œì„ êµ¬ë§¤í•˜ì„¸ìš”</span>
      </div>
      <div class="shop-grid" id="shopGrid" style="margin-top:10px"></div>
    </div>

    <!-- SKILLS -->
    <div class="card">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong>ìŠ¤í‚¬</strong>
        <span class="small">MPì™€ ì¿¨ë‹¤ìš´ì„ í™•ì¸</span>
      </div>
      <div class="skill-row" style="margin-top:10px">
        <div class="skill-btn" id="skill1Btn" onclick="useSkill(1)">
          POWER STRIKE<br><small class="small">MP 20 Â· ì¿¨ë‹¤ìš´ 5s</small>
          <div class="cooldown" id="skill1Cd"></div>
        </div>
        <div class="skill-btn" id="skill2Btn" onclick="useSkill(2)" style="background:linear-gradient(90deg,#ffd18a,#ff8b8b)">
          WHIRLWIND<br><small class="small">MP 40 Â· ì¿¨ë‹¤ìš´ 12s</small>
          <div class="cooldown" id="skill2Cd"></div>
        </div>
      </div>
      <div style="margin-top:10px" class="row">
        <button class="btn" onclick="jobChange()" id="jobBtn" style="display:none">ğŸ”® ì „ì§</button>
        <button class="btn secondary" onclick="checkAttendance()">ğŸ“… ì¶œì„ì²´í¬</button>
      </div>
    </div>

    <!-- LOG -->
    <div class="card">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong>ë¡œê·¸</strong>
        <div class="badge" id="timeBadge">ì €ì¥ë¨</div>
      </div>
      <div class="log" id="log" style="margin-top:8px">ê²Œì„ ì‹œì‘ â€” í™”ë©´ì„ í´ë¦­í•´ ì‚¬ìš´ë“œ í™œì„±í™”</div>
    </div>
  </div>
</div>

<!-- audio -->
<audio id="hitSound" src="https://assets.mixkit.co/sfx/preview/mixkit-quick-hit-2187.mp3"></audio>
<audio id="killSound" src="https://assets.mixkit.co/sfx/preview/mixkit-video-game-win-2016.mp3"></audio>
<audio id="upgradeSound" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3"></audio>
<audio id="failSound" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3"></audio>
<audio id="levelSound" src="https://assets.mixkit.co/sfx/preview/mixkit-magic-game-win-1949.mp3"></audio>
<audio id="bossSound" src="https://assets.mixkit.co/sfx/preview/mixkit-dramatic-hit-166.mp3"></audio>

<script>
// JSëŠ” ê¸°ì¡´ ì½”ë“œ ê·¸ëŒ€ë¡œ, ë‹¨ HUD MP ì—…ë°ì´íŠ¸ ì¶”ê°€
function updateUI(){
  playerLvSpan.textContent = playerLv;
  playerLvSmall.textContent = playerLv;
  atkSpan.textContent = atk;
  coinSpan.textContent = coins;
  expTextSpan.textContent = `${exp}/${nextExp}`;
  upgradeLvSpan.textContent = upgradeLv;
  upgradeCostSpan.textContent = 20 + upgradeLv*6;
  jobTextSpan.textContent = job;
  hpFill.style.width = (monsterMaxHp>0 ? (monsterHp/monsterMaxHp*100) : 0) + "%";
  mpFill.style.width = (mp/maxMp*100) + "%";
  document.getElementById("hudMpFill").style.width = (mp/maxMp*100) + "%";
  checkJob();
  renderMap();
  renderShop();
  save();
}
</script>
</body>
</html>
