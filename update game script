<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ìœ ê¸°ì‚¬ RPG â€“ ëì—†ëŠ” ì—¬ì •</title>

<style>
body {
    margin: 0;
    height: 100vh;
    background: radial-gradient(circle at top, #2b2d31, #000);
    color: #dbdee1;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Segoe UI', sans-serif;
}

.container {
    width: 92%;
    max-width: 460px;
    background: linear-gradient(180deg, #1e1f22, #141517);
    border-radius: 28px;
    padding: 18px;
    box-shadow: 0 0 50px rgba(0,0,0,0.9);
}

/* HUD */
.hud {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
}
.hud-box {
    flex: 1;
    margin: 0 4px;
    background: #111;
    border-radius: 14px;
    padding: 8px 0;
    text-align: center;
    font-size: 12px;
    font-weight: bold;
}
.hud-box span {
    display: block;
    font-size: 17px;
}

/* ë¬´ì§€ê°œ (ê°ì„±) */
.rainbow {
    background: linear-gradient(
        270deg,
        red, orange, yellow, green, cyan, blue, purple, red
    );
    background-size: 600% 600%;
    animation: rainbow 2s linear infinite;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}
@keyframes rainbow {
    0% { background-position: 0% 50%; }
    100% { background-position: 100% 50%; }
}

/* ì§€ì—­ */
.area {
    text-align: center;
    font-size: 14px;
    margin-bottom: 6px;
    color: #9fa1ff;
}

/* ëª¬ìŠ¤í„° */
.monster-box {
    background: radial-gradient(circle at top, #1b1c1f, #0c0d0f);
    border-radius: 26px;
    padding: 26px 16px;
    text-align: center;
    margin-bottom: 10px;
    cursor: pointer;
    user-select: none;
}
.monster-name {
    font-size: 22px;
    margin-bottom: 8px;
}
.hp-bar {
    width: 100%;
    height: 14px;
    background: #111;
    border-radius: 10px;
    overflow: hidden;
}
.hp-fill {
    height: 100%;
    background: linear-gradient(90deg, #ff3b3b, #ff7b7b);
    width: 100%;
    transition: width 0.1s;
}

/* ë²„íŠ¼ */
.btn {
    width: 100%;
    padding: 14px;
    font-size: 16px;
    font-weight: bold;
    border-radius: 18px;
    border: none;
    cursor: pointer;
    color: white;
    background: linear-gradient(to bottom, #5865F2, #404EED);
    margin-top: 8px;
}
.btn.awakened {
    background: linear-gradient(
        270deg,
        red, orange, yellow, green, cyan, blue, purple
    );
    background-size: 600% 600%;
    animation: rainbow 2s linear infinite;
}

.log {
    margin-top: 6px;
    font-size: 13px;
    color: #aaa;
    text-align: center;
}
</style>
</head>

<body>
<div class="container">

    <div class="hud">
        <div class="hud-box">ê°•í™”<span id="upgradeLv">1</span></div>
        <div class="hud-box">ATK<span id="atk">1</span></div>
        <div class="hud-box">ğŸ’°<span id="coin">0</span></div>
    </div>

    <div id="areaText" class="area">ğŸŒ± ì´ˆì›</div>

    <div class="monster-box" onclick="manualAttack()">
        <div id="monsterName" class="monster-name">ìŠ¬ë¼ì„</div>
        <div class="hp-bar">
            <div id="hpFill" class="hp-fill"></div>
        </div>
    </div>

    <button id="upgradeBtn" class="btn" onclick="upgrade()">ğŸ”§ ê°•í™” (<span id="chanceText">90</span>%)</button>
    <button class="btn" onclick="toggleIdle()">â³ ë°©ì¹˜: <span id="idleState">OFF</span></button>

    <div id="log" class="log">ì—¬ì •ì´ ì‹œì‘ë˜ì—ˆë‹¤â€¦</div>

</div>

<!-- ğŸ”Š ì‚¬ìš´ë“œ -->
<audio id="hitSound" src="https://assets.mixkit.co/sfx/preview/mixkit-quick-hit-2187.mp3"></audio>
<audio id="upgradeSound" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3"></audio>

<script>
/* =====================
   ê¸°ë³¸ ìŠ¤íƒ¯
===================== */
let coins = 0;
let atk = 1;
let upgradeLv = 1;
let upgradeChance = 90;
let kills = 0;

/* ë³´ë„ˆìŠ¤ ê³¨ë“œ */
const bonusGoldChance = 20; // %
const bonusGoldAmount = 30;

/* ë°©ì¹˜ */
let idle = false;
let idleTimer = null;

/* ëª¬ìŠ¤í„° */
let monsterHp = 10;
let monsterMaxHp = 10;

/* ì§€ì—­ */
const areas = ["ğŸŒ± ì´ˆì›","ğŸŒ´ ë°€ë¦¼","â„ ëˆˆ","ğŸŒ‹ í™”ì‚°","ğŸŒŒ ê³µí—ˆ"];
const monsters = [
    ["ìŠ¬ë¼ì„","ì´ˆì› ëŠ‘ëŒ€","ë²„ì„¯ê´´ë¬¼"],
    ["ê³ ë¸”ë¦°","ë…ê±°ë¯¸","ì •ê¸€ ì˜¤í¬"],
    ["ë¹™ê²°ìˆ˜","ì„¤ì¸","ì–¼ìŒ ê³¨ë ˜"],
    ["í™”ì—¼ë ¹","ìš©ì•” ë¹„ìŠ¤íŠ¸","ë¶ˆê½ƒ ê¸°ì‚¬"],
    ["ì´ë¦„ ì—†ëŠ” ì¡´ì¬","ê³µí—ˆì˜ ëˆˆ","ì°¨ì›ì˜ ë§ë ¹"]
];
const areaLevelReq = [1,10,20,30,40];

/* =====================
   ì§€ì—­ ê³„ì‚°
===================== */
function areaIndex() {
    let idx = Math.floor(kills / 6);
    for (let i = 0; i < areas.length; i++) {
        if (i > idx || playerLevel() < areaLevelReq[i]) return Math.max(0, i - 1);
    }
    return areas.length - 1;
}

function playerLevel() {
    return Math.floor(upgradeLv / 2) + 1;
}

/* =====================
   ëª¬ìŠ¤í„° ìƒì„±
===================== */
function spawnMonster() {
    const area = areaIndex();
    monsterMaxHp = 10 + kills * 3 + area * 20;
    monsterHp = monsterMaxHp;

    const list = monsters[area];
    document.getElementById("monsterName").textContent =
        list[Math.floor(Math.random() * list.length)];

    document.getElementById("areaText").textContent =
        `${areas[area]} (ê¶Œì¥ LV ${areaLevelReq[area]})`;

    updateMonsterUI();
}

/* =====================
   ê³µê²©
===================== */
function attack(dmg) {
    monsterHp -= dmg;
    document.getElementById("hitSound").play();

    if (monsterHp <= 0) {
        kills++;

        let baseGold = 5 + areaIndex() * 5;
        coins += baseGold;

        if (Math.random() * 100 < bonusGoldChance) {
            coins += bonusGoldAmount;
            document.getElementById("log").textContent =
                `ğŸ’° ë³´ë„ˆìŠ¤ ê³¨ë“œ +${bonusGoldAmount}!`;
        } else {
            document.getElementById("log").textContent =
                `ëª¬ìŠ¤í„° ì²˜ì¹˜! +${baseGold}ğŸ’°`;
        }

        spawnMonster();
    }
    updateUI();
}
function manualAttack() { attack(atk); }

/* =====================
   ê°•í™”
===================== */
function upgrade() {
    const awakened = upgradeLv >= 10;
    const realChance = awakened ? Math.min(95, upgradeChance + 10) : upgradeChance;

    if (Math.random() * 100 <= realChance) {
        upgradeLv++;
        atk += awakened ? 2 : 1;
        upgradeChance = Math.max(10, upgradeChance - (awakened ? 1 : 2));
        document.getElementById("upgradeSound").play();
        document.getElementById("log").textContent =
            awakened ? "ğŸ”¥ ê°ì„± ì„±ê³µ!" : "ê°•í™” ì„±ê³µ!";
    } else {
        document.getElementById("log").textContent = "ê°•í™” ì‹¤íŒ¨â€¦";
    }
    updateUI();
}

/* =====================
   ë°©ì¹˜
===================== */
function toggleIdle() {
    idle = !idle;
    document.getElementById("idleState").textContent = idle ? "ON" : "OFF";
    idle ? idleTimer = setInterval(() => attack(atk), 1000)
         : clearInterval(idleTimer);
}

/* =====================
   UI
===================== */
function updateMonsterUI() {
    document.getElementById("hpFill").style.width =
        (monsterHp / monsterMaxHp * 100) + "%";
}

function updateUI() {
    document.getElementById("coin").textContent = coins;
    document.getElementById("atk").textContent = atk;

    const lv = document.getElementById("upgradeLv");
    lv.textContent = upgradeLv;
    if (upgradeLv >= 10) lv.classList.add("rainbow");

    document.getElementById("chanceText").textContent = upgradeChance;

    const btn = document.getElementById("upgradeBtn");
    if (upgradeLv >= 10) btn.classList.add("awakened");

    updateMonsterUI();
}

/* ì‹œì‘ */
spawnMonster();
updateUI();
</script>
</body>
</html>
